<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Overview of 2.x</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="A HTML5 web console for managing Java services with support for JMX, OSGi, Apache ActiveMQ, Apache Camel and Fuse Fabric. Open source, modular and extensible" name="description" />
    <link href="/stylesheets/normalize.css" rel="stylesheet">
    <link href="/stylesheets/bootstrap.min.css" rel="stylesheet">
    <link href="/stylesheets/theme.css" rel="stylesheet">
    <link href="//static.jboss.org/css/tabzilla.css" media="screen" rel="stylesheet">
    <script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js"></script>
    <script src="//static.jboss.org/js/_jbossorg-tabzilla.js"></script>

    <!--
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    -->
    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/r29/html5.js"></script>
    <![endif]-->
    <link href="/favicon.ico" rel="shortcut icon" />
  </head>

  <body class="home">

    <!-- begin dropup -->
    <div class="dropup visible-md visible-lg visible-sm">
      <div id="ajbossproject">A JBoss Project</div> 
      <a class="tabnav-closed" href="#" id="tab">Red Hat</a>
      <script>
    window.addEventListener('load', function() {
        renderTabzilla("hawtio", "hawtio")
        }, false);
      </script>
    </div>
    <!-- end dropup -->

    <!-- begin top banner -->
    <div class="top-banner visible-md visible-lg visible-sm">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <a class="top-banner-logo" href="/">
              <img src="/images/hawtio_logo.svg" />
            </a>
          </div>
        </div>
      </div>
    </div>
    <!--
    <div class="container visible-md visible-lg visible-sm">
      <div class="row">
        <div class="col-md-12 top-banner">
          <a href="/"></a>
        </div>
      </div>
    </div>
    -->
    <!-- end top banner -->

    <!-- begin header -->
    <div class="top-bar navbar navbar-default" role="navigation">
      <!-- begin inner container --> 
      <div class="container">
        <!-- begin inner row -->
        <div class="row">
          <!-- begin logo/toggle -->
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-nav-collapse">
              <span class="sr-only">Toggle Navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand visible-xs" href="/">
              <img src="/images/logo-100px.png" />
            </a>
            <hr class="visible-xs">
          </div>
          <!-- end logo/toggle -->

          <!-- begin navbar -->
          <div id="main-nav-collapse" class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
              <li><a href="/getstarted/index.html" title="find out how to get started using hawtio to manage your java stuff">Get Started Now!</a></li>
              <li><a href="/docs/index.html">Documentation</a></li>
              <li><a href="/community/index.html">Community</a></li>
              <li><a href="/articles/index.html" title="view the demos of using hawtio with Apache ActiveMQ, Apache Camel and JBoss Fuse">Demos</a></li>
              <li><a href="https://github.com/hawtio/hawtio">github</a></li>
            </ul>
          </div>
          <!-- end navbar -->
        </div>
        <!-- end inner row -->
      </div>
      <!-- end inner container --> 
    </div>
    <!-- end header -->

    <!-- begin page display -->
    <div id="main">
		  <p><div id="content-header">
    <div class="container">
      <h1>Overview of Hawtio 2.x</h1>
    </div>
  </div>
  <div class="container">
    <div id="content"></p>

<p>The main goals for 2.x are to update to a more recent AngularJS version as well as Bootstrap and Patternfly.  We also need to enable folks to re-use parts of the console.  Currently in 1.x there's a few options to customize the existing console:</p>

<ul>
<li>Hide and arrange tabs via the preferences panel in the console itself</li>
<li>Add a vendor.js file or load a plugin that customizes the perspective plugin's configuration</li>
<li>Build a sliced up hawtio app.js via <a href="https://github.com/hawtio/hawtio/tree/master/hawtio-custom-app">hawtio-custom-app</a></li>
</ul>

<p>Hawtio 2.x introduces the possibility of packaging up hawtio plugins as bower components.  Some advantages are:</p>

<ul>
<li>Dependencies for a plugin can usually be managed through bower</li>
<li>Plugins can be decoupled and developed/released individually</li>
<li>In the case of typescript plugins it's easier to distribute definition files for dependent plugins to use</li>
</ul>

<p>The first bullet point is the key bit, as we can combine bower with wiredep to automatically wire in plugin js (and css!) files and dependencies into a console's index.html file.  The 2.x plugin loader also still supports discovering plugins via a JSON file or a URL that produces some JSON, so we also still have the possibility of loading plugins on the fly as well.  A console project that pulls in hawtio plugins can also define it's own plugins for some specific functionality.  The assembly project also has greater control over the layout of the navigation and pages.</p>

<h2 id = "Components">Components</h2>

<p>Here's a rundown of the current hawtio 2.x components:</p>

<h3 id = "javascript_plugins">javascript plugins</h3>

<ul>
<li><a href="https://github.com/hawtio/hawtio-core">hawtio-core</a> - Tiny core module that contains the logging and plugin loader code.  It also contains 1 angular module that initializes some stub services that can be overridden by other plugins.  Responsible for loading plugins and bootstrapping a hawtio app</li>
<li><a href="https://github.com/hawtio/hawtio-core-navigation">hawtio-core-navigation</a> - Navigation bar, also can handle sub-tabs.  Provides a nice API that allows you to define your routes and tabs in one block, or you can define your routes and tabs separately</li>
</ul>

<h3 id = "typescript_plugins">typescript plugins</h3>

<ul>
<li><a href="https://github.com/hawtio/hawtio-core-dts">hawtio-core-dts</a> - A repository of typescript definition files for third-party scripts as well as any javascript plugins such as hawtio-core or hawtio-core-navigation.  Not actually a plugin, but is a dependency for any typescript plugin</li>
<li><a href="https://github.com/hawtio/hawtio-core-perspective">hawtio-core-perspective</a> - Perspective selector, adds itself to the navigation bar and provides an API to plugins to configure perspectives.</li>
<li><a href="https://github.com/hawtio/hawtio-utilities">hawtio-utilities</a> - A collection of helper functions used throughout hawtio, most plugins will probably depend on this module</li>
<li><a href="https://github.com/hawtio/hawtio-ui">hawtio-ui</a> - The UI widgets from hawtio 1.x, including hawtio-simple-table and the editor plugin</li>
<li><a href="https://github.com/hawtio/hawtio-forms">hawtio-forms</a> - The forms plugin from hawtio 1.x, used to create forms from a simple schema</li>
<li><a href="https://github.com/hawtio/hawtio-jmx">hawtio-jmx</a> - The JMX and JVM plugins from hawtio 1.x as well as the tree plugin.  Now contains all jolokia initialization code as well as the Core.Workspace object service from hawtio 1.x.  Will likely be a dependency for any plugin that talks to jolokia</li>
<li><a href="https://github.com/hawtio/hawtio-oauth">hawtio-oauth</a> - Provides authentication for OAuth using <a href="http://openshift.github.io/">OpenShift</a> and <a href="http://keycloak.jboss.org/">KeyCloak</a></li>
<li><a href="https://github.com/hawtio/hawtio-dashboard">hawtio-dashboard</a> - Provides a dashboard capability; letting any angular pages be composed into a dashboard</li>
<li><a href="https://github.com/hawtio/hawtio-wiki">hawtio-wiki</a> - Provides a git based wiki</li>
<li><a href="https://github.com/hawtio/hawtio-kubernetes">hawtio-kubernetes</a> - The plugin for working with <a href="http://kubernetes.io/">Kubernetes</a></li>
<li><a href="https://github.com/hawtio/hawtio-forge">hawtio-forge</a> - The <a href="http://forge.jboss.org/">JBoss Forge</a> plugin for hawtio so it can view and create projects and execute forge commands</li>
</ul>

<h3 id = "slush_generators">slush generators</h3>

<ul>
<li><a href="https://github.com/hawtio/slush-hawtio-javascript">slush-hawtio-javascript</a> - Generates a starter jvascript plugin project that depends on hawtio-core and hawtio-core-navigation with some example plugin code.</li>
<li><a href="https://github.com/hawtio/slush-hawtio-typescript">slush-hawtio-typescript</a> - Generates a starter typescript plugin project, depends on hawtio-utilities, hawtio-core and hawtio-core-navigation.</li>
</ul>

<h2 id = "Getting_started">Getting started</h2>

<h3 id = "working_with_existing_projects">working with existing projects</h3>

<p>Git clone any of the above projects and then cd into the folder. </p>

<p>Then get npm and bower to install their stuff:</p>

<pre><code>npm install
bower install</code></pre>

<p>you are now ready to run the default build with gulp</p>

<pre><code>gulp</code></pre>

<p>and you should be able to open a web browser and work on the code and have things rebuild etc.</p>

<h3 id = "initial_setup">initial setup</h3>

<p>To get started, first off make sure you're running a relatively recent version node/npm.  <a href="http://nodejs.org/">Go download it</a> and re-install/upgrade if you're not sure.  Make sure you update your npm packages with a <code>sudo npm update -g</code>.  Then install a few tools:</p>

<p><code>npm install -g bower gulp slush slush-hawtio-javascript slush-hawtio-typescript typescript</code></p>

<p>If you only want to develop javascript plugins then you don't really need <code>slush-hawtio-typescript</code> and <code>typescript</code>.</p>

<h3 id = "first_project">first project</h3>

<p>To create a project, first create a directory:</p>

<p><code>mkdir my-awesome-plugin</code></p>

<p>Then run the appropriate generator:</p>

<p><code>slush hawtio-typescript</code></p>

<p><em>or</em></p>

<p><code>slush hawtio-javascript</code></p>

<p>Answer the questions when prompted, the generator will then chug away and install a bunch of npm modules and bower components.  When you're back at the prompt you'll have a number of files in the current directory:</p>

<ul>
<li><code>package.json</code> - Contains any node modules this project depends on.  Manage with <code>npm install --save-dev</code> and <code>npm uninstall --save-dev</code>.</li>
<li><code>bower.json</code> - Contains any bower modules this project depends on.  Also lists any main files this bower package has which is really important to fill in.  The generator already puts dist/my-awesome-plugin.js in here.</li>
<li><code>gulpfile.js</code> - This configures the build, which is done by a tool called 'gulp'.</li>
<li><p><code>plugins</code> - This directory contains code for an example plugin.  The build is set up to look at subdirectories, so put your plugin code in here following this kind of convention:</p>

<p>```
plugins
     |
     &mdash; foo
          |
          &mdash; html
          |
          &mdash; ts|js
```</p></li>
<li><p><code>d.ts</code> (typescript only) - a directory that contains definition files generated by the typescript compiler.</p></li>
<li><code>defs.d.ts</code> (typescript only) - a definitions file that's automatically updated at build time to include all the files under <code>d.ts</code></li>
<li><code>index.html</code> - a simple index.html file you can use to view/test the plugin at development time.</li>
<li><code>dist</code> - The output directory of the build, files in here should generally be configured in your bower.json under &ldquo;main&rdquo;.</li>
</ul>

<p>To get going just start the build:</p>

<p><code>gulp</code></p>

<p>which will build the typescript (if applicable) and start up a web server listening on localhost:2772.  Open this in your browser and you should see a nav bar with 'Example' in it, which is the example plugin.</p>

<h2 id = "IDE_Tips">IDE Tips</h2>

<p>If you use <a href="https://www.jetbrains.com/idea/">Intellij</a> or <a href="https://www.jetbrains.com/webstorm/">WebStorm</a> as your IDE for working on the project then you get nice smart completion, refactoring and navigation between function calls and their source etc.</p>

<p>One thing that really helps when navigating from a function call to its implementation source is to exclude the <strong>d.ts</strong> folder of your project. This folder contains the generated TypeScript API definition files; so there's not much value in there from a navigation/completeness perspective when noodling the code.</p>

<p>So open File &rarr; Project Structure then in the Modules tab select the d.ts folder and click the <strong>Excluded</strong> button. Then if you alt-click on a function call it will take you directly to the TypeScript/JavaScript source code of the implementation (and not prompt you to choose between the .ts and .d.ts files)</p>

<h2 id = "FAQ">FAQ</h2>

<p><em>My typescript code fails to compile with missing definitions for 'ng' etc&hellip;</em></p>

<p>In your plugin code make sure you add a reference path to the <code>includes.ts</code> file under <code>plugins</code>.  This will bring in all the definitions from hawtio-core-dts, hawtio-utilities etc.</p>

<p><em>Where can I add typescript definitions for some new dependency I brought in?</em></p>

<p>Best place is add or replace the reference path(s) in <code>plugins/includes.ts</code>, then it'll be available to all of your plugin code.</p>

<p><em>Can I have multiple plugins in one package?</em></p>

<p>Yes!</p>

<p><em>My plugin needs to talk to some other thing too, how does that happen?</em></p>

<p>Use <a href="https://www.npmjs.com/package/hawtio-node-backend">hawtio-node-backend</a> to proxy requests</p>

<p>Or hand-configure a proxy:</p>

<ul>
<li>run <code>npm install --save-dev proxy-middleware</code></li>
<li>add this code to your gulpfile at the beginning:</li>
</ul>

<p>```javascript
var url = require('url');
var proxy = require('proxy-middleware');
```</p>

<ul>
<li>Change your 'connect' task to something like this:</li>
</ul>

<p>```javascript
gulp.task('connect', ['watch'], function() {
  plugins.connect.server({
    root: '.',
    livereload: true,
    port: 2772,
    fallback: 'index.html',
    middleware: function(connect, options) {
      return [
        (function() {
          var proxyOptions = url.parse('http://localhost:8282/hawtio/jolokia');
          // proxies requests from /jolokia to the above URL
          proxyOptions.route = '/jolokia';
          return proxy(proxyOptions);
        })() ];
    }
  });
});
```</p>

<p><em>I get weird compile errors but I didn't change anything!</em></p>

<p>It could be a dependency got compiled with an updated typescript version.  Run <code>npm update</code> in your package to update your node modules and try again.</p>

<p><em>Something under libs/ got messed up!</em></p>

<p>You can just blow away <code>libs</code> and run <code>bower update</code> to re-install dependencies anytime you like.</p>

<p><em>A bower dependency I want to install doesn't have <code>main</code> configured at all, what do I do?</em></p>

<p>Typically for these cases it's best to run <code>bower install</code> (don't add <code>--save</code>) on the package to get the files, then copy the .js or .css files into your packages <code>dist</code> directory, then configure those js and css files in your package's <code>bower.json</code> file in the <code>main</code> attribute.  That way any package that depends on your code will get the dependent javascript automatically wired into their index.html.</p>

<p><em>How do I work on multiple components at once?</em></p>

<p>There's a couple options, you can use <code>bower link</code> which sets up a soft-link under libs/ to the dependent component.  However this can mess up typescript compilation.</p>

<p>A better option is to soft-link the <code>dist/hawtio-*.js</code> (or whatever the built javascript file is) directly.  Then you can <code>gulp watch</code> in the dependency and <code>gulp</code> in your main project and live reload will kick in whenever you change code in either.  The same approach is handy for .css files.  Then when you <code>bower update</code> after releasing the dependency the soft-link will be replaced with the updated file</p>

<p><em>How do I enable debug logging at runtime?</em></p>

<p>After the page is loaded, open up the javascript console and paste:</p>

<p>```
localStorage['logLevel'] = angular.toJson(Logger.DEBUG);
```</p>

<h2 id = "Releasing">Releasing</h2>

<p>It's easy!  First make sure you have a README, and a changelog would be good.  Make sure you have a sane version in your bower.json file.  I'd also recommend updating package.json so it's consistent.  Since this is hawtio 2.x stuff all plugins should start at version 2.0.0.  Make sure you've built your plugin and check in any changes.  Then it's time to start the long winded release process of publishing a bower plugin:</p>

<ol>
<li><code>git tag 2.0.0</code></li>
<li><code>git push &amp;&amp; git push --tags</code></li>
<li><code>bower register my-awesome-plugin git@github.com:hawtio/my-awesome-plugin.git</code></li>
</ol>

<p>say 'yes' in step 3 and congrats, you're done!  Now your plugin can easily be pulled in by other projects.</p>

<p>If you fix an issue and need to make an update it also takes a lot of steps:</p>

<ol>
<li>Fix issue, update changelog etc.</li>
<li><code>bower version patch</code></li>
<li><code>git push &amp;&amp; git push --tags</code></li>
</ol>

<p>phew, you're done!  Now you can <code>bower update</code> in other packages that pull in my-awesome-plugin as a dependency.</p>

<p></div>
  </div></p>
    </div>
    <!-- end page display -->

    <!-- begin footer -->
    <div class="footer">
      <!-- begin footer container -->
      <div class="container">
        <!-- begin footer row -->
        <div class="row">
          <!-- begin project info -->
          <div class="project col-md-4">
            <p>
              <img class="logo-big" src="/images/logo-450px.png">
            </p>
            <p>
              <i class="icon-fire"></i>
              Mixed with <a href="http://getbootstrap.com/">Bootstrap</a>. Baked by <a href="http://scalate.fusesource.org">Scalate</a>.
            </p>
              <i class="icon-share-alt"></i>
            <p>
              Website and docs licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.
            </p>
            <p>
              Code released under <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, v2.0</a>.
            </p>
          </div>
          <!-- end project info -->

          <!-- begin footer-nav -->
          <div class="footer-nav col-md-2">
            <h4>Learn</h4>
            <ul>
              <li>
                <a href="/getstarted/index.html">Get Started</a>
              </li>
              <li>
                <a href="/articles/index.html">Articles and Demos</a>
              </li>
              <li>
                <a href="/faq/index.html">FAQ</a>
              </li>
              <li>
                <a href="/developers/index.html">Developers</a>
              </li>
              <li>
                <a href="/building/index.html">Building</a>
              </li>
            </ul>
          </div>
          <!-- end footer-nav -->

          <!-- begin footer-nav -->
          <div class="footer-nav col-md-2">
            <h4>Get Involved</h4>
            <ul>
              <!--
              <li>
                <a href="http://community.jboss.org/en/hawtio?view=discussions">Forums</a>
              </li>
              -->
              <li>
                <a href="/contributing/index.html">Contributing</a>
              </li>
              <li>
                <a href="/community/index.html">Community</a>
              </li>
              <li>
                <a href="https://github.com/hawtio/hawtio/issues?state=open">Issue Tracker</a>
              </li>
              <li>
                <a href="https://github.com/hawtio/hawtio">Source Code</a>
              </li>
              <!--
              <li>
                <a href="/community/contributors">Contributors</a>
              </li>
              -->
            </ul>
          </div>
          <!-- end footer-nav -->

          <!-- begin sponsor -->
          <div class="sponser col-md-4">
            <!-- begin follow-us -->
            <div class="follow-us">
              <h4>Stay Informed</h4>
              <ul>
                <!--
                <li>
                  <a href="https://plus.google.com/100660127586085393031"><img alt="Google+" src="/images/social/googleplus-16.png" title="Follow hawtio on Google+" /></a>
                </li>
                -->
                <li>
                  <a href="https://twitter.com/#!/search/%23hawtio"><img alt="Twitter" src="/images/social/twitter-16.png" title="Browse the #hawtio hashtag on Twitter" /></a>
                </li>
                <!--
                <li>
                  <a href="http://www.linkedin.com/groups?gid=3120340"><img alt="LinkedIn" src="/images/social/linkedin-16.png" title="Join the hawtio group on LinkedIn" /></a>
                </li>
                <li>
                  <a href="http://vimeo.com/channels/hawtio"><img alt="Vimeo" src="/images/social/vimeo-16.png" title="Follow the hawtio channel on Vimeo" /></a>
                </li>
                -->
              </ul>
            </div>
            <!-- end follow-us -->

            <p>This website is open source! If you want to improve it, <a href="http://github.com/hawtio/hawtio">fork the project</a>, hack on it, then send a pull request. You can also view the <a href="http://www.seethestats.com/site/hawtio">visitor stats</a>.</p>
          </div>
        <!-- end sponsor -->
        </div>
        <!-- end footer row -->

        <!-- begin top link row -->
        <div class="row">
          <div class="col-md-12">
            <p class="link-top text-center">
              <a class="visible-desktop" href="#" id="toTop">Top</a>
            </p>
          </div>
        </div>
        <!-- end top link row -->

      </div>
      <!-- end footer container -->

      <div class="container" id="companyfooter">
        <div class="redhatlogo" style="text-align:center;">
          <div id="logospacer"></div>
            <a href="http://www.redhat.com/">
            <img src="http://static.jboss.org/theme/images/common/redhat_logo.png">
          </a>
        </div>
      </div>

    </div>
    <!-- end footer -->


    <!-- begin scripts -->
    <script type="text/javascript">
      $(function() {
        $('html').addClass('ready');
        prettify();
        activateFooterGravity();
        activateTooltips();
        activateToTopControl();
      });
    </script>
    <script src="/javascripts/bootstrap.min.js"></script>
    <!--
    <script src="/javascripts/prettify.js"></script>
    -->
    <!--
    <script src="/javascripts/site.js"></script>
    -->
    <script type="text/javascript">
      (function() {
        var po = document.createElement('script'); po.async = true; po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script>
		<script type="text/javascript">
		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-36899203-1']);
		  _gaq.push(['_trackPageview']);

		  (function() {
		    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();
		</script>
    <!-- end scripts -->
  </body>
</html>
