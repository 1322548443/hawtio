<?xml version='1.0' encoding='UTF-8'?>
<features xmlns="http://karaf.apache.org/xmlns/features/v1.2.0" name="hawtio-${project.version}">

  <feature name="hawtio-core" version="${project.version}" resolver="(obr)">
    <details>Installs the core hawtio war file with minimal extensions</details>
    <feature>war</feature>
    <bundle>mvn:io.hawt/hawtio-json-schema-mbean/${project.version}</bundle>
    <bundle>mvn:io.hawt/hawtio-war/${project.version}/war</bundle>

    <config name="jmx.acl.hawtio.plugin">
      * = *
    </config>
  </feature>

  <feature name="hawtio-rbac" version="${project.version}" resolver="(obr)">
    <details>Installs the hawtio RBAC enabler bundle(s)</details>
    <bundle>mvn:io.hawt/hawtio-osgi-jmx/${project.version}</bundle>
  </feature>

  <feature name="hawtio" version="${project.version}" resolver="(obr)">
    <details>Installs the main hawtio web console</details>
    <feature>hawtio-core</feature>
    <feature>hawtio-rbac</feature>
    <!--
    TODO: Is it required for v2?
    <feature>hawtio-maven-indexer</feature>
    -->
  </feature>

  <feature name="hawtio-offline" version="${project.version}" resolver="(obr)">
    <details>Installs hawtio in offline mode (without Maven service which requires internet connection)</details>
    <feature>hawtio-core</feature>
    <feature>hawtio-rbac</feature>
  </feature>

  <feature name="hawtio-maven-indexer" version="${project.version}" resolver="(obr)">
    <details>Installs the hawtio Maven indexer service as a separate bundle (requires internet connection)</details>
    <bundle>mvn:io.hawt/hawtio-maven-indexer/${project.version}</bundle>
  </feature>

</features>
