<div ng-controller="SpringBatch.jobExecutionContextController">
    <h3>Job Execution Context</h3>
    <div>
        <a ng-href="#/springbatch/jobs/{{jobName}}/executions/{{jobId}}" class="btn btn-small btn-primary pull-right">Back</a>
    </div>
    <span ng-repeat='entry in jobExecutionContext.context.map.entry'>
        <div class="accordion" id="accordion{{index}}">
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion{{$index}}" href="#collapseOne{{$index}}">
                        Open/Close
                    </a>
                </div>
                <div id="collapseOne{{$index}}" class="accordion-body collapse in">
                    <div class="accordion-inner">
                        <span ng-repeat="(key,value) in entry">
                            <span ng-if="key == 'string'">
                                {{value}}
                            </span>
                            <span ng-if="key == 'int'">
                                {{value}}
                            </span>
                        </span>
                        <span ng-repeat="(key,value) in entry">

                            <span ng-if="key == 'list'">
                                <span ng-if="value">
                                    <span ng-repeat="(kee,listItemMap) in value">
                                        <span ng-if="kee =='string'">{{listItemMap}}</span>
                                        <span ng-if="kee != 'string'">
                                            <table class="table">
                                                <thead>
                                                <tr>
                                                    <th ng-repeat="(k,v) in listItemMap[1] track by $index" title="{{k}}">{{k.substring(0,5)}}</th>
                                                </tr>
                                                <tr ng-repeat="row in listItemMap">
                                                    <td ng-repeat="(ke,va) in row track by $index">
                                                        <span ng-if="toString(va).indexOf('reference') == -1">{{va}}</span>
                                                    </td>
                                                </tr>
                                                </thead>
                                            </table>
                                        </span>
                                    </span>
                                </span>
                            </span>

                        </span>
                    </div>
                </div>
            </div>
        </div>
    </span>
</div>
