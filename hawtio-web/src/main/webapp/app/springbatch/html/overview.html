<div ng-controller="SpringBatch.JobOverviewExecListController">
    <h3>Overview</h3>
    <div class="row-fluid">
        <div class="span9">
            <div class="row-fluid">
                <div class="span2"><strong>Job Instance ID:</strong></div>
                <div class="span1"><span class="text-info">{{jobInstance.id}}</span></div>
                <div class="span3">
                    <span style="cursor: pointer" ng-click="fetchPrevJobInstance(jobInstance)"> <i class="icon-backward icon-2x"></i> </span>  &nbsp;
                    <span style="cursor: pointer" ng-click="refreshJobInstance(jobInstance)"> <i class="icon-refresh icon-2x"></i> </span>  &nbsp;
                    <span style="cursor: pointer" ng-click="fetchNextJobInstance(jobInstance)"> <i class="icon-forward icon-2x"></i> </span>  &nbsp;
                </div>
                <div class="span3">
                    <span id="jobExecutionStatus">
                        <span   class="btn-large {{(jobInstance.lastJobExecutionStatus == 'COMPLETED')?'btn-success':'btn-danger'}}">
                            {{jobInstance.lastJobExecutionStatus}}
                        </span>
                    </span>
                </div>
                <div class="span3">
                    <div class="dropdown">
                        <a class="dropdown-toggle btn btn-primary" data-toggle="dropdown" href="#">Actions <b class="caret"></b></a>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                            ...
                        </ul>
                    </div>
                </div>
            </div>

            <div class="row-fluid">
                <div>
                    <h3>Job Execution</h3>
                    <table class="table table-striped table-hover">
                        <thead>
                        <tr>
                            <th></th>
                            <th>ID</th>
                            <th>Date</th>
                            <th>Start</th>
                            <th>Duration</th>
                            <th>Status</th>
                            <th>Exit Code</th>
                            <th>Context</th>
                        </tr>
                        </thead>
                        <tr ng-repeat="execution in jobExecutionList">
                            <td><input type="radio" name="fetchStepsForExecutionRadio" ng-click="fetchStepsForExecution(execution.id)"></td>
                            <td>{{execution.id}}</td>
                            <td>{{execution.startTime}}</td>
                            <td>{{execution.startTime}}</td>
                            <td>{{execution.duration}}</td>
                            <td>{{execution.status}}</td>
                            <td>{{execution.status}}</td>
                            <td data-title="Context">
                                <a ng-href="#/springbatch/jobs/executions/{{jobName}}/{{execution.id}}">view</a>
                            </td>
                        </tr>
                    </table>
                </div>
                <div>
                    <h3>Step Executions</h3>
                    <table class="table table-striped table-hover">
                        <thead>
                        <tr>
                            <th>Name</th>
                            <th>Status</th>
                            <th>Reads</th>
                            <th>Writes</th>
                            <th>Commit</th>
                            <th>Skip</th>
                            <th>Duration</th>
                            <th>Context</th>

                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="stepExecution in stepExecutionList" >

                            <td data-title="'Id'">
                                {{stepExecution.name}}
                            </td>
                            <td data-title="Status">{{stepExecution.status}}</td>
                            <td data-title="Read Count">{{stepExecution.readCount}}</td>
                            <td data-title="Write Count">{{stepExecution.writeCount}}</td>
                            <td data-title="Commit Count">{{stepExecution.commitCount}}</td>
                            <td data-title="Skip Count">{{stepExecution.rollbackCount}}</td>
                            <td data-title="Duration">{{stepExecution.duration}}</td>
                            <td data-title="Context">
                                <a ng-href="#/springbatch/jobs/executions/{{jobName}}/{{executionId}}/steps/{{stepExecution.id}}">view</a>
                            </td>

                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="span1">

            <table>
                <thead>
                <tr class="info">
                    <th>
                        <b class="pull-left">Params</b>
                    </th>
                    <th>
                        <span class="pull-left" ng-click="addParam(jobParams)" style="cursor: pointer"> <i class="icon-plus"></i> </span>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr class="info" ng-repeat="param in jobParams">
                    <td>
                        <span class="pull-left">
                            <input type="text" value="{{param.name}}">
                            <input type="text" value="{{param.value}}">
                        </span>
                    </td>
                    <td>
                        <span class="pull-left" ng-click="removeParam(jobParams , $index)" style="cursor: pointer"> <i class="icon-trash"></i></span>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

</div>
